<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
  </head>
  <body>

    <h2>ğŸ“š My Library</h2>

    {% if request.args.get('message') %}
    <p style="color: green;">{{ request.args.get('message') }}</p>
    {% endif %}

    <form action="/" method="GET">
        <input type="text" name="search" placeholder="Search books..." required>
        <button type="submit">Search</button>
    </form>

    <p>Sort by:
        <a href="/?sort=title">Title</a> |
        <a href="/?sort=author">Author</a> |
        <a href="/?sort=year">Year</a>
    </p>

    {% if books %}
        {% for book in books %}
        <div style="margin-bottom: 20px;">

            <!-- Buchcover nur anzeigen, wenn ISBN existiert -->
            {% if book.isbn %}
                <img src="https://covers.openlibrary.org/b/isbn/{{ book.isbn }}-M.jpg"
                    alt="cover image"
                    width="100">
            {% endif %}

            <h3>{{ book.title }}</h3>
            <p>Author: {{ book.author.name }}</p>
            <p>Published: {{ book.publication_year }}</p>

            <form action="/book/{{ book.id }}/delete" method="POST" style="display:inline;">
                <button type="submit" onclick="return confirm('Delete this book?');">
                    âŒ Delete Book
                </button>
            </form>
        </div>
        {% endfor %}
    {% else %}
        <p>No books found. <a href="/add_book">Add one</a> ğŸ“˜</p>
    {% endif %}

    <br>
    <a href="/add_author">â• Add Author</a> |
    <a href="/add_book">ğŸ“˜ Add Book</a>

</body>
</html>